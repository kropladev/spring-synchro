package pl.nordea.synchro.directory;

import org.springframework.beans.factory.annotation.Autowired;

import pl.nordea.synchro.config.OrganisationUnit;

import fuego.directory.DirHumanParticipant;
import fuego.directory.DirectoryException;

public class ParticipantBpm  implements IParticipant{
	
	@Autowired
	private DirSession session;
	DirHumanParticipant participant;
	
	/**
	 * constructor creating Participant object
	 * @param userCode
	 */
	public ParticipantBpm(String userCode) {
		//super();
		try {
			this.participant = DirHumanParticipant.fetch(session.getSession(), userCode);
		} catch (DirectoryException e) {
			e.printStackTrace();
		}
	}

	@Override
	public void disable() {
		if(participant.canBeDisabled() && participant.isEnabled()){
			this.participant.setEnabled(false);
		}
	}

	@Override
	public void activate() {
		if(!participant.isEnabled()){
			this.participant.setEnabled(true);
		}
	}

	@Override
	public void rebuildRoles() {
		// TODO Auto-generated method stub
		
	}

	@Override
	public void changeName(String userName) {
		if(this.participant.canBeModified()){
			this.participant.setDisplayName(userName);
			this.participant.setLastName(userName);
		}
	}

	@Override
	public void changeCountry(OrganisationUnit ou) {
		if(this.participant.canBeModified()){
			this.participant.setOU(ou.toString());
		}
	}

	@Override
	public void changeEmail(String userEmail) {
		if(this.participant.canBeModified()){
			this.participant.setMail(userEmail);
		}
	}
	
	@Override
	public void store(){
		try {
			this.participant.update();
			//participant.
		} catch (DirectoryException e) {
			e.printStackTrace();
		}
	}

	@Override
	public void create() {
		// TODO Auto-generated method stub
		
	}
	

}
